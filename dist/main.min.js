var RaccoonRecorder=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(1),r=i(o);e.exports=r.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),u=i(a),s=n(3),c=i(s),d=n(5),f=i(d),l=n(6),h=(i(l),n(7)),p=i(h),_=n(4),v=i(_),m="mediaWrapper not defined! maybe because \nMediaRecorder or AudioContext are not supported in this browser.";window.AudioContext=window.AudioContext||window.webkitAudioContext;var y={mediaRecorder:1,audioContext:2},b=function(){function e(t){o(this,e),this._mediaWrapper,this._isPlaying=!1,this._options=t||{}}return r(e,[{key:"_getMediaWrapper",value:function(e){return window.MediaRecorder&&this._options.fixedMedia!==y.audioContext?new c.default(e):window.AudioContext&&this._options.fixedMedia!==y.mediaRecorder?new f.default(e):((0,p.default)("Core","_getMediaWrapper",m),{})}},{key:"play",value:function(){var e=this;this._isPlaying||u.default.getMicrophoneAccess(function(t){v.default.invoke(e,"onPermissonAccess"),e._mediaWrapper=e._getMediaWrapper(t),v.default.invoke(e._mediaWrapper,"start"),e._isPlaying=!0,v.default.invoke(e,"onPlay"),e._mediaWrapper.onMediaReady=function(t){var n=t.blob;v.default.invoke(e,"onMediaReady",n)}},function(t){v.default.invoke(e,"onPermissonDenied"),(0,p.default)("Core","Play {MicrophoneAccess}",t)},this._options.skylinkAppKey)}},{key:"stop",value:function(){this._isPlaying&&(v.default.invoke(this._mediaWrapper,"stop"),this._isPlaying=!1,v.default.invoke(this,"onStop"))}}],[{key:"VERSION",get:function(){return"1.0.0"}},{key:"MEDIA_ENUM",get:function(){return y}}]),e}();t.default=b},function(e,t){"use strict";function n(e,t,n){Skylink?!function(){var i=new Skylink;i.init({appKey:n},function(n,o){i.getUserMedia({audio:!0},function(n,i){return n?void t(n):void e(i)})})}():t("mediaDevices.getUserMedia and getUserMedia not supported in this browser.")}Object.defineProperty(t,"__esModule",{value:!0});var i={getMicrophoneAccess:n};t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(4),u=i(a),s=function(){function e(t){o(this,e),this._stream=t,this._samples=[],this._mediaRecorder,this._blob}return r(e,[{key:"start",value:function(){var e=this;this._mediaRecorder=new window.MediaRecorder(this._stream),this._mediaRecorder.start(),this._mediaRecorder.ondataavailable=function(t){e._samples.push(t.data)},this._mediaRecorder.onstop=function(t){e._blob=new Blob(e._samples,{type:"audio/ogg; codecs=opus"}),u.default.invoke(e,"onMediaReady",{blob:e._blob})}}},{key:"stop",value:function(){this._mediaRecorder.stop()}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={isFunction:function(e){return"function"==typeof e},isArray:function(e){return e instanceof Array},invoke:function(e,t,n){if(e&&t){var i=e[t];return this.isFunction(i)?(n=n&&this.isArray(n)?n:[n],i.apply(e,n)):void 0}}};t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(6),u=i(a),s=n(4),c=i(s),d=function(){function e(t){o(this,e),this._stream=t,this._mediaRecorder,this._sampleRate,this._audioInput,this._volume,this._recorder,this._leftchannel=[],this._rightchannel=[],this._recordingLength=0,this._numberOfChannels,this._mp3Encoder,this._buffers=[]}return r(e,[{key:"start",value:function(){var e=this;this._mediaRecorder=new(window.AudioContext||window.webkitAudioContext),this._mp3Encoder=new u.default({context:this._mediaRecorder}),this._mp3Encoder.initialize(),this._sampleRate=this._mediaRecorder.sampleRate,this._numberOfChannels=this._mediaRecorder.numberOfChannels,this._volume=this._mediaRecorder.createGain(),this._audioInput=this._mediaRecorder.createMediaStreamSource(this._stream),this._audioInput.connect(this._volume);var t=2048;this._recorder=this._mediaRecorder.createScriptProcessor(t,2,2),this._recorder.onaudioprocess=function(n){var i=n.inputBuffer.getChannelData(0),o=n.inputBuffer.getChannelData(1);e._leftchannel.push(new Float32Array(i)),e._rightchannel.push(new Float32Array(o)),e._recordingLength+=t,e._mp3Encoder.onProcess(i)},this._volume.connect(this._recorder),this._recorder.connect(this._mediaRecorder.destination),this._mp3Encoder.onMp3Data=function(t){e._buffers.push(t)}}},{key:"stop",value:function(){var e=this;this._mp3Encoder.finish(),this._mp3Encoder.onMp3End=function(t){e._buffers.push(t),c.default.invoke(e,"onMediaReady",{blob:new Blob(e._buffers,{type:"audio/mp3"})})},this._mediaRecorder.close(),this._audioInput.disconnect(),this._recorder.disconnect(),this._audioInput=void 0,this._recorder=void 0}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(4),u=i(a),s=function(){function e(t){t.context;o(this,e);var n=document.querySelector("#mp3Worker").src;this._encodingWorker=new Worker(n)}return r(e,[{key:"initialize",value:function(){var e=this;this._encodingWorker.postMessage({cmd:"init",config:{channels:2,samplerate:48e3,bitrate:32}}),this._encodingWorker.onmessage=function(t){"data"===t.data.cmd&&u.default.invoke(e,"onMp3Data",t.data.buf),"end"===t.data.cmd&&u.default.invoke(e,"onMp3End",t.data.buf)}}},{key:"onProcess",value:function(e){this._encodingWorker.postMessage({cmd:"encode",buf:e})}},{key:"finish",value:function(){this._encodingWorker.postMessage({cmd:"finish"})}}]),e}();t.default=s},function(e,t){"use strict";function n(e,t,n){console.error(e+" "+t+": "+n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}]);