<html>

<head>
  <title>Recorder Demo</title>
  <style>
    .buttons {
      display: flex;
      justify-content: center;
    }

    .buttons button {
       margin-left: 10px;
    }
    
    .audio {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    
    .audio audio {
      margin-top: 10px;
    }
  </style>
</head>

<body>

  <div class="buttons">
    <button onclick="clickPlay()">play</button>
    <button onclick="clickStop()">stop</button>
  </div>

  <div class="audio"></div>

  <script src="http://cdn.temasys.com.sg/skylink/skylinkjs/0.6.x/skylink.complete.js"></script>
  <script src="vendor/libmp3lame.min.js"></script>
  <script src="dist/main.js"></script>

  <script>
         var r = new raccoonRecorder({
             skylinkAppKey: 'f0d79c86-bfc9-48e0-81b7-cb132f55c287'
         });

         function clickPlay() {
            r.play();
         }

         r.onPlay = function() {
             console.log('on play');  
         };

         function clickStop() {
            r.stop();
         }

         r.onStop = function() {
             console.log('on stop');  
         };

         r.onMediaReady = function(blob) {
            console.log('blob', blob);

            var audioDiv = document.querySelector('.audio');  
            var audio = document.createElement('audio');
            audio.setAttribute('controls', '');

            audioDiv.appendChild(audio);
            audio.controls = true;
      
            var audioURL = window.URL.createObjectURL(blob);
            audio.src = audioURL;
         }
  </script>
</body>

</html>